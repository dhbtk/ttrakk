{"version":3,"sources":["stored_state.js","Forms.js","api/toggl_report.js","Graph.js","App.js","serviceWorker.js","index.js"],"names":["fullKeyFor","prefix","key","getStoredState","defaultValue","storedValue","localStorage","getItem","JSON","parse","createGetStoredState","storeState","value","setItem","stringify","createStoreState","SAVED_KEYS","Forms","props","state","token","workspaceId","projectId","hours","period","settingsOpen","this","emitOnUpdate","data","setState","Object","keys","filter","it","includes","forEach","onUpdate","months","Array","from","length","_","i","toString","className","htmlFor","onChange","event","setFormState","target","map","offset","format","subMonths","Date","parseInt","type","onClick","id","min","React","Component","monthDateArray","dateInMonth","getDaysInMonth","getFullYear","getMonth","reportToBurndown","getAllEntries","currentPage","params","queryString","URLSearchParams","page","window","fetch","method","headers","then","response","json","responseData","per_page","total_count","otherEntries","concat","getDateInMonth","since","startOfMonth","until","endOfMonth","convertPeriod","workspace_id","project_ids","user_agent","convertToParams","entries","goalInSeconds","totalExecutedSeconds","entry","dur","reduce","a","b","dailyGoalSeconds","Math","round","day","isWeekend","businessDaysInMonth","dailyData","date","goal","executed","isSameDay","start","e","graphData","index","idealSlope","slice","d","executedSlope","spreadsheetReport","entriesInDay","groupedByDescription","recordedEntry","find","g","description","duration","push","grouped","Authorization","btoa","Graph","tooltipOpen","tooltipX","tooltipY","tooltipDate","tooltipExecuted","tooltipSubtotal","tooltipIdeal","tableOpen","goalHours","currentDayIndex","findIndex","unit","maxGraphSlice","style","flex","display","flexDirection","hms","line","idealPercent","executedPercent","padding","height","alignItems","background","title","fontWeight","width","version","viewBox","hour","strokeWidth","fill","stroke","color","x","y","fontSize","join","onMouseOver","showTooltip","onMouseLeave","hideTooltip","cx","cy","r","textAnchor","visibility","left","top","tooltipDimensions","document","querySelector","getBoundingClientRect","bodyDimensions","body","currentTarget","right","bottom","totalHours","seconds","floor","string","substr","repeat","App","graphLoading","console","log","loadGraph","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.93e3bba9.chunk.js","sourcesContent":["const fullKeyFor = (prefix, key) => `hours.${prefix}.${key}`;\n\nfunction createGetStoredState(prefix) {\n  return (key, defaultValue) => {\n    const storedValue = localStorage.getItem(fullKeyFor(prefix, key));\n    if (storedValue) {\n      return JSON.parse(storedValue);\n    }\n    return defaultValue;\n  };\n}\n\nfunction createStoreState(prefix) {\n  return (key, value) => {\n    localStorage.setItem(fullKeyFor(prefix, key), JSON.stringify(value));\n    return value;\n  };\n}\n\nexport default function storedState(prefix) {\n  const getStoredState = createGetStoredState(prefix);\n  const storeState = createStoreState(prefix);\n  return { getStoredState, storeState };\n}\n","import React from 'react';\nimport storedState from './stored_state';\nimport './Forms.css';\nimport { format, subMonths } from 'date-fns';\n\nconst { getStoredState, storeState } = storedState('Forms');\n\nconst SAVED_KEYS = ['token', 'workspaceId', 'projectId', 'hours'];\n\nexport default class Forms extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: getStoredState('token', ''),\n      workspaceId: getStoredState('workspaceId', ''),\n      projectId: getStoredState('projectId', ''),\n      hours: getStoredState('hours', 34),\n      period: '0',\n      settingsOpen: false\n    };\n  }\n\n  componentDidMount() {\n    this.emitOnUpdate(this.state);\n  }\n\n  setFormState(data) {\n    this.setState(state => {\n      Object.keys(data).filter(it => SAVED_KEYS.includes(it)).forEach(key => storeState(key, data[key]));\n      this.emitOnUpdate({...state, ...data});\n      return data;\n    });\n  }\n\n  emitOnUpdate(state) {\n    const { token, workspaceId, projectId, hours, period } = state;\n    this.props.onUpdate({ token, workspaceId, projectId, hours, period });\n  }\n\n  render() {\n    const months = Array.from({ length: 13 }, (_, i) => (12 - i).toString());\n    const { token, workspaceId, projectId, hours, period, settingsOpen } = this.state;\n    return (\n      <div className=\"Forms m-3\">\n        <div className=\"form-group\">\n          <label htmlFor=\"form_period\">Período</label>\n          <select className=\"custom-select\" value={period} onChange={event => this.setFormState({period: event.target.value})}>\n            {months.map(offset => (\n              <option value={offset} key={offset}>{format(subMonths(new Date(), parseInt(offset, 10)), 'MMMM yyyy')}</option>\n            ))}\n          </select>\n        </div>\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h2 className=\"mb-0\">\n              <button className=\"btn btn-link\" type=\"button\" onClick={() => this.setState({settingsOpen: !settingsOpen})}>\n                Opções\n              </button>\n            </h2>\n          </div>\n          <div className={`collapse ${settingsOpen ? 'show' : ''}`}>\n            <div className=\"card-body\">\n              <div className=\"form-group\">\n                <label htmlFor=\"form_hours\">Horas</label>\n                <input className=\"form-control\" id=\"form_hours\" type=\"number\" min={1} value={hours} onChange={event => this.setFormState({hours: event.target.value})} />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"form_token\">Token</label>\n                <input className=\"form-control\" id=\"form_token\" type=\"text\" value={token} onChange={event => this.setFormState({token: event.target.value})} />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"form_workspace\">Workspace ID</label>\n                <input className=\"form-control\" id=\"form_workspace\" type=\"text\" value={workspaceId} onChange={event => this.setFormState({workspaceId: event.target.value})} />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"form_project\">Project ID</label>\n                <input className=\"form-control\" id=\"form_project\" type=\"text\" value={projectId} onChange={event => this.setFormState({projectId: event.target.value})} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { format, startOfMonth, endOfMonth, subMonths, getDaysInMonth, isWeekend, isSameDay } from 'date-fns';\n\nfunction businessDaysInMonth(dateInMonth) {\n  return Array.from({ length: getDaysInMonth(dateInMonth) }, (_, i) => i + 1)\n    .filter(day => !isWeekend(new Date(dateInMonth.getFullYear(), dateInMonth.getMonth(), day)))\n    .length;\n}\n\nfunction monthDateArray(dateInMonth) {\n  return Array.from({ length: getDaysInMonth(dateInMonth) }, (_, i) => (\n    new Date(dateInMonth.getFullYear(), dateInMonth.getMonth(), i + 1)\n  ));\n}\n\nexport function reportToBurndown({ token, workspaceId, projectId, hours, period }) {\n  return getAllEntries(1, token, convertToParams({ workspaceId, projectId, period })).then(entries => {\n    const goalInSeconds = (hours * 60 * 60);\n    const totalExecutedSeconds = entries.map(entry => entry.dur / 1000).reduce((a, b) => a + b, 0);\n    const dateInMonth = getDateInMonth(period);\n    const dailyGoalSeconds = Math.round(goalInSeconds / businessDaysInMonth(dateInMonth));\n    const dailyData = monthDateArray(dateInMonth).map(date => {\n      return {\n        date,\n        goal: isWeekend(date) ? 0 : dailyGoalSeconds,\n        executed: entries.filter(entry => isSameDay(date, new Date(entry.start))).map(e => e.dur / 1000).reduce((a, b) => a + b, 0)\n      }\n    });\n    const graphData = dailyData.map((data, index) => {\n      return {\n        ...data,\n        idealSlope: dailyData.slice(0, index + 1).map(d => d.goal).reduce((a, b) => a - b, goalInSeconds),\n        executedSlope: dailyData.slice(0, index + 1).map(d => d.executed).reduce((a, b) => a - b, goalInSeconds),\n      }\n    });\n    return {\n      goalInSeconds,\n      totalExecutedSeconds,\n      dateInMonth,\n      dailyGoalSeconds,\n      dailyData,\n      graphData,\n      spreadsheetReport: spreadsheetReport(entries, period)\n    }\n  });\n}\n\nfunction spreadsheetReport(entries, period) {\n  return monthDateArray(getDateInMonth(period)).map(date => {\n    const entriesInDay = entries.filter(entry => isSameDay(date, new Date(entry.start)));\n    const groupedByDescription = [];\n    entriesInDay.forEach(entry => {\n      let recordedEntry = groupedByDescription.find(g => g.description === entry.description);\n      if (!recordedEntry) {\n        recordedEntry = { description: entry.description, duration: 0 };\n        groupedByDescription.push(recordedEntry);\n      }\n      recordedEntry.duration += entry.dur;\n    });\n\n    return groupedByDescription.map(grouped => {\n      return {\n        date: format(date, 'yyyy-MM-dd'),\n        description: grouped.description,\n        duration: grouped.duration / 1000\n      }\n    });\n  }).reduce((a, b) => a.concat(b), []);\n}\n\nfunction getAllEntries(currentPage, token, params) {\n  const queryString = new URLSearchParams({ ...params, page: currentPage }).toString();\n  return window.fetch(\n    `https://toggl.com/reports/api/v2/details?${queryString}`,\n    { method: 'GET', headers: headers(token) })\n    .then(response => response.json()).then(responseData => {\n      if(!(responseData && responseData.data)) {\n        return [];\n      }\n\n      const totalObtained = ((currentPage - 1) * responseData.per_page) + responseData.data.length;\n      if (totalObtained < responseData.total_count) {\n        return getAllEntries(currentPage + 1, token, params).then(otherEntries => {\n          return responseData.data.concat(otherEntries);\n        });\n      }\n      return responseData.data;\n    });\n}\n\nconst headers = token => ({ Authorization: `Basic ${btoa(`${token}:api_token`)}` });\n\nfunction convertToParams({ workspaceId, projectId, period }) {\n  const { since, until } = convertPeriod(period);\n  return {\n    since,\n    until,\n    workspace_id: workspaceId,\n    project_ids: projectId,\n    user_agent: 'kkd-hrs'\n  };\n}\n\nfunction getDateInMonth(period) {\n  return subMonths(new Date(), parseInt(period, 10));\n}\n\nfunction convertPeriod(period) {\n  const dateInMonth = getDateInMonth(period);\n  const formatPattern = 'yyyy-MM-dd';\n  return {\n    since: format(startOfMonth(dateInMonth), formatPattern),\n    until: format(endOfMonth(dateInMonth), formatPattern)\n  }\n}\n","import React, { Component } from 'react';\nimport { isSameMonth, isSameDay, parseISO, format } from 'date-fns';\nimport './Graph.css';\n\nexport default class Graph extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltipOpen: false,\n      tooltipX: 0,\n      tooltipY: 0,\n      tooltipDate: new Date(),\n      tooltipExecuted: '',\n      tooltipSubtotal: '',\n      tooltipIdeal: '',\n      tableOpen: false\n    };\n  }\n  render() {\n    const {\n      goalInSeconds,\n      totalExecutedSeconds,\n      dateInMonth,\n      dailyGoalSeconds,\n      dailyData,\n      graphData,\n      spreadsheetReport\n    } = this.props.graphData;\n\n    const goalHours = goalInSeconds / 3600;\n    const currentDayIndex = graphData.findIndex(data => isSameDay(new Date(), data.date));\n    const unit = 70 / graphData.length;\n    const maxGraphSlice = currentDayIndex === -1 ? graphData.length : (currentDayIndex + 1);\n\n    return (\n      <div style={{ flex: '1', display: 'flex', flexDirection: 'column' }}>\n        <div className=\"m-1\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">\n                {format(dateInMonth, 'MMMM yyyy')}\n                <button type=\"button\" className=\"btn btn-primary ml-auto\" onClick={() => this.setState({ tableOpen: !this.state.tableOpen })}>\n                  Table\n                </button>\n              </h5>\n              <ul>\n                <li>\n                  <strong>Goal: </strong> {hms(goalInSeconds)}\n                </li>\n                <li>\n                  <strong>Executed: </strong> {hms(totalExecutedSeconds)}\n                </li>\n                <li>\n                  <strong>Daily goal: </strong> {hms(dailyGoalSeconds)}\n                </li>\n                {currentDayIndex !== -1 && (\n                  <li>\n                    <strong>Distance from daily goal: </strong> {hms(graphData[currentDayIndex].executedSlope - graphData[currentDayIndex].idealSlope)}\n                  </li>\n                )}\n              </ul>\n              <table style={this.state.tableOpen ? {} : { display: 'none'}} className=\"table table-striped\">\n                <tbody>\n                {spreadsheetReport.map((line, index) => (\n                    <tr key={index}>\n                      <td>{line.date}</td>\n                      <td>{hms(line.duration)}</td>\n                      <td>{line.description}</td>\n                    </tr>\n                ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        <div style={{ flex: '1', display: 'none' }}>\n          {graphData.map(({ date, goal, executed, idealSlope, executedSlope }, index) => {\n            const idealPercent = idealSlope / goalInSeconds;\n            const executedPercent = executedSlope / goalInSeconds;\n            return (\n              <div key={index}\n                style={{ padding: '3px', height: '100%', display: 'flex', flex: '1', flexDirection: 'column' }}>\n                <div style={{ flex: '1', display: 'flex', alignItems: 'flex-end' }}>\n                  <div style={{ background: '#f00', flex: '1', height: `${idealPercent * 100}%` }}\n                    title={`Ideal: ${hms(idealSlope)} remaining`} />\n                  <div style={{ background: '#0f0', flex: '1', height: `${executedPercent * 100}%` }}\n                    title={`Executed: ${hms(executedSlope)} remaining`} />\n                </div>\n                <div style={{ height: '30px', fontWeight: index === currentDayIndex ? 'bold' : 'normal' }}>\n                  {index + 1}.\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        <div style={{ flex: '1' }}>\n          <svg style={{ height: '100%', width: '100%' }} version=\"1\" viewBox=\"0 0 70 30\" id=\"graph\">\n            {Array.from({ length: goalHours + 1 }, (_, i) => i).map(hour => (\n              <path\n                strokeWidth={0.1}\n                fill=\"none\"\n                stroke=\"#cccccc\"\n                d={`M 0 ${29 - 28 * (hour / goalHours)} H 70`}\n                key={hour}\n              />\n            ))}\n            {Array.from({ length: goalHours + 1 }, (_, i) => i).map(hour => (\n              <text\n                color=\"#cccccc\"\n                x={0}\n                y={29.6 - 28 * (hour / goalHours)}\n                key={hour}\n                fontSize={0.5}\n              >\n                {hour}\n              </text>\n            ))}\n            <path\n              className=\"ideal\"\n              d={graphData.map(({ idealSlope }, i) => (\n                `${i === 0 ? 'M' : 'L'} ${unit * i + unit / 2} ${29 - (idealSlope / goalInSeconds) * 28}`\n              )).join(' ')}\n            />\n            {graphData.map(({ idealSlope }, i) => (\n              <circle\n                onMouseOver={event => this.showTooltip(event, i)}\n                onMouseLeave={() => this.hideTooltip()}\n                cx={unit * i + unit / 2}\n                cy={29 - (idealSlope / goalInSeconds) * 28}\n                r={0.2}\n                className=\"ideal\"\n                key={i}\n              />\n            ))}\n            <path className=\"executed\" d={graphData.slice(0, maxGraphSlice).map(({ executedSlope }, i) => (\n              `${i === 0 ? 'M' : 'L'} ${unit * i + unit / 2} ${29 - (executedSlope / goalInSeconds) * 28}`\n            )).join(' ')} />\n            {graphData.slice(0, maxGraphSlice).map(({ executedSlope }, i) => (\n              <circle\n                onMouseOver={event => this.showTooltip(event, i)}\n                onMouseLeave={() => this.hideTooltip()}\n                cx={unit * i + unit / 2}\n                cy={29 - (executedSlope / goalInSeconds) * 28}\n                r={0.2}\n                className=\"executed\"\n                key={i}\n              />\n            ))}\n            {Array.from({ length: graphData.length }, (_, i) => i).map(day => (\n              <text textAnchor=\"end\" x={unit * day + unit / 2} y={30} key={day} fontSize={0.8}>{day + 1}.</text>\n            ))}\n          </svg>\n          <div id=\"tooltip\" style={{\n            visibility: this.state.tooltipOpen ? 'visible' : 'hidden',\n            left: this.state.tooltipX,\n            top: this.state.tooltipY\n          }}>\n            <p><strong>{format(this.state.tooltipDate, 'dd/MM/yyyy')}</strong></p>\n            <p>Executed: {this.state.tooltipExecuted}</p>\n            <p>Subtotal: {this.state.tooltipSubtotal}</p>\n            <p>Ideal: {this.state.tooltipIdeal}</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  showTooltip(event, index) {\n    const tooltipDimensions = document.querySelector('#tooltip').getBoundingClientRect();\n    const bodyDimensions = document.body.getBoundingClientRect();\n    const { left, height, right, top } = event.currentTarget.getBoundingClientRect();\n    let tooltipX = right + 20;\n    if (tooltipX + tooltipDimensions.width > bodyDimensions.right) {\n      tooltipX = left - 20 - tooltipDimensions.width;\n    }\n    let tooltipY = top + height / 2 - tooltipDimensions.height / 2;\n    if (tooltipY + tooltipDimensions.height > bodyDimensions.bottom) {\n      tooltipY = bodyDimensions.bottom - tooltipDimensions.height - 5;\n    }\n    const data = this.props.graphData.graphData[index];\n    const totalHours = this.props.graphData.goalInSeconds;\n    this.setState({\n      tooltipX,\n      tooltipY,\n      tooltipOpen: true,\n      tooltipDate: data.date,\n      tooltipExecuted: hms(data.executed),\n      tooltipSubtotal: hms(totalHours - data.executedSlope),\n      tooltipIdeal: hms(totalHours - data.idealSlope)\n    });\n  }\n\n  hideTooltip() {\n    this.setState({ tooltipOpen: false });\n  }\n}\n\nfunction hms(seconds) {\n  seconds = Math.floor(seconds);\n  return [Math.floor(seconds / 3600), Math.floor(seconds / 60) % 60, seconds % 60].map(i => rjust(`${i}`, 2, '0')).join(':')\n}\n\nfunction rjust(string, width, padding) {\n  padding = padding || ' ';\n  padding = padding.substr(0, 1);\n  if (string.length < width)\n    return padding.repeat(width - string.length) + string;\n  else\n    return string;\n}\n","import React, { Component } from 'react';\nimport './App.css';\nimport Forms from './Forms';\nimport { reportToBurndown } from './api/toggl_report';\nimport Graph from './Graph';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      graphLoading: false,\n      graphData: null\n    };\n  }\n\n  loadGraph(data) {\n    this.setState({ graphLoading: true });\n    reportToBurndown(data).then(graphData => {\n      console.log(graphData);\n      this.setState({ graphLoading: false, graphData });\n    });\n  }\n\n  render() {\n    const { graphLoading, graphData } = this.state;\n    return (\n      <div className=\"App\">\n        <Forms onUpdate={data => this.loadGraph(data)} />\n        {!graphLoading && graphData && <Graph graphData={graphData} />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}