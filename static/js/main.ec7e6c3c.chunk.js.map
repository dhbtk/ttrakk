{"version":3,"sources":["stored_state.js","Forms.js","api/toggl_report.js","Graph.js","App.js","serviceWorker.js","index.js"],"names":["fullKeyFor","prefix","key","getStoredState","defaultValue","storedValue","localStorage","getItem","JSON","parse","createGetStoredState","storeState","value","setItem","stringify","createStoreState","SAVED_KEYS","Forms","props","state","token","workspaceId","projectId","hours","period","settingsOpen","this","emitOnUpdate","data","setState","Object","keys","filter","it","includes","forEach","onUpdate","months","Array","from","length","_","i","toString","className","htmlFor","onChange","event","setFormState","target","map","offset","type","onClick","id","min","React","Component","reportToBurndown","getAllEntries","currentPage","params","queryString","URLSearchParams","page","window","fetch","method","headers","then","response","json","responseData","per_page","total_count","otherEntries","concat","dateInMonth","getDateInMonth","since","format","startOfMonth","until","endOfMonth","convertPeriod","workspace_id","project_ids","user_agent","convertToParams","entries","goalInSeconds","totalExecutedSeconds","entry","dur","reduce","a","b","dailyGoalSeconds","Math","round","getDaysInMonth","day","isWeekend","Date","getFullYear","getMonth","businessDaysInMonth","dailyData","monthDateArray","date","goal","executed","isSameDay","start","e","graphData","index","idealSlope","slice","d","executedSlope","Authorization","btoa","subMonths","parseInt","Graph","tooltipOpen","tooltipX","tooltipY","tooltipExecuted","tooltipSubtotal","tooltipIdeal","goalHours","currentDayIndex","findIndex","parseISO","unit","maxGraphSlice","style","flex","display","flexDirection","hms","idealPercent","executedPercent","padding","height","alignItems","background","title","fontWeight","width","version","viewBox","hour","strokeWidth","fill","stroke","color","x","y","fontSize","join","onMouseOver","showTooltip","onMouseLeave","hideTooltip","cx","cy","r","textAnchor","visibility","left","top","tooltipDimensions","document","querySelector","getBoundingClientRect","bodyDimensions","body","currentTarget","right","bottom","totalHours","seconds","floor","string","substr","repeat","App","graphLoading","console","log","loadGraph","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ec7e6c3c.chunk.js","sourcesContent":["const fullKeyFor = (prefix, key) => `hours.${prefix}.${key}`;\n\nfunction createGetStoredState(prefix) {\n  return (key, defaultValue) => {\n    const storedValue = localStorage.getItem(fullKeyFor(prefix, key));\n    if (storedValue) {\n      return JSON.parse(storedValue);\n    }\n    return defaultValue;\n  };\n}\n\nfunction createStoreState(prefix) {\n  return (key, value) => {\n    localStorage.setItem(fullKeyFor(prefix, key), JSON.stringify(value));\n    return value;\n  };\n}\n\nexport default function storedState(prefix) {\n  const getStoredState = createGetStoredState(prefix);\n  const storeState = createStoreState(prefix);\n  return { getStoredState, storeState };\n}\n","import React from 'react';\nimport storedState from './stored_state';\nimport './Forms.css';\n\nconst { getStoredState, storeState } = storedState('Forms');\n\nconst SAVED_KEYS = ['token', 'workspaceId', 'projectId', 'hours'];\n\nexport default class Forms extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: getStoredState('token', ''),\n      workspaceId: getStoredState('workspaceId', ''),\n      projectId: getStoredState('projectId', ''),\n      hours: getStoredState('hours', 34),\n      period: '0',\n      settingsOpen: false\n    };\n  }\n\n  componentDidMount() {\n    this.emitOnUpdate(this.state);\n  }\n\n  setFormState(data) {\n    this.setState(state => {\n      Object.keys(data).filter(it => SAVED_KEYS.includes(it)).forEach(key => storeState(key, data[key]));\n      this.emitOnUpdate({...state, ...data});\n      return data;\n    });\n  }\n\n  emitOnUpdate(state) {\n    const { token, workspaceId, projectId, hours, period } = state;\n    this.props.onUpdate({ token, workspaceId, projectId, hours, period });\n  }\n\n  render() {\n    const months = Array.from({ length: 13 }, (_, i) => (12 - i).toString());\n    const { token, workspaceId, projectId, hours, period, settingsOpen } = this.state;\n    return (\n      <div className=\"Forms m-3\">\n        <div className=\"form-group\">\n          <label htmlFor=\"form_period\">Período</label>\n          <select className=\"custom-select\" value={period} onChange={event => this.setFormState({period: event.target.value})}>\n            {months.map(offset => (\n              <option value={offset} key={offset}>{offset}</option>\n            ))}\n          </select>\n        </div>\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h2 className=\"mb-0\">\n              <button className=\"btn btn-link\" type=\"button\" onClick={() => this.setState({settingsOpen: !settingsOpen})}>\n                Opções\n              </button>\n            </h2>\n          </div>\n          <div className={`collapse ${settingsOpen ? 'show' : ''}`}>\n            <div className=\"card-body\">\n              <div className=\"form-group\">\n                <label htmlFor=\"form_hours\">Horas</label>\n                <input className=\"form-control\" id=\"form_hours\" type=\"number\" min={1} value={hours} onChange={event => this.setFormState({hours: event.target.value})} />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"form_token\">Token</label>\n                <input className=\"form-control\" id=\"form_token\" type=\"text\" value={token} onChange={event => this.setFormState({token: event.target.value})} />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"form_workspace\">Workspace ID</label>\n                <input className=\"form-control\" id=\"form_workspace\" type=\"text\" value={workspaceId} onChange={event => this.setFormState({workspaceId: event.target.value})} />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"form_project\">Project ID</label>\n                <input className=\"form-control\" id=\"form_project\" type=\"text\" value={projectId} onChange={event => this.setFormState({projectId: event.target.value})} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { format, startOfMonth, endOfMonth, subMonths, getDaysInMonth, isWeekend, isSameDay } from 'date-fns';\n\nfunction businessDaysInMonth(dateInMonth) {\n  return Array.from({ length: getDaysInMonth(dateInMonth) }, (_, i) => i + 1)\n    .filter(day => !isWeekend(new Date(dateInMonth.getFullYear(), dateInMonth.getMonth(), day)))\n    .length;\n}\n\nfunction monthDateArray(dateInMonth) {\n  return Array.from({ length: getDaysInMonth(dateInMonth) }, (_, i) => (\n    new Date(dateInMonth.getFullYear(), dateInMonth.getMonth(), i + 1)\n  ));\n}\n\nexport function reportToBurndown({ token, workspaceId, projectId, hours, period }) {\n  return getAllEntries(1, token, convertToParams({ workspaceId, projectId, period })).then(entries => {\n    const goalInSeconds = (hours * 60 * 60);\n    const totalExecutedSeconds = entries.map(entry => entry.dur / 1000).reduce((a, b) => a + b);\n    const dateInMonth = getDateInMonth(period);\n    const dailyGoalSeconds = Math.round(goalInSeconds / businessDaysInMonth(dateInMonth));\n    const dailyData = monthDateArray(dateInMonth).map(date => {\n      return {\n        date: format(date, 'yyyy-MM-dd'),\n        goal: isWeekend(date) ? 0 : dailyGoalSeconds,\n        executed: entries.filter(entry => isSameDay(date, new Date(entry.start))).map(e => e.dur / 1000).reduce((a, b) => a + b, 0)\n      }\n    });\n    const graphData = dailyData.map((data, index) => {\n      return {\n        ...data,\n        idealSlope: dailyData.slice(0, index + 1).map(d => d.goal).reduce((a, b) => a - b, goalInSeconds),\n        executedSlope: dailyData.slice(0, index + 1).map(d => d.executed).reduce((a, b) => a - b, goalInSeconds),\n      }\n    });\n    return {\n      goalInSeconds,\n      totalExecutedSeconds,\n      dateInMonth,\n      dailyGoalSeconds,\n      dailyData,\n      graphData\n    }\n  });\n}\n\nfunction getAllEntries(currentPage, token, params) {\n  const queryString = new URLSearchParams({ ...params, page: currentPage }).toString();\n  return window.fetch(\n    `https://toggl.com/reports/api/v2/details?${queryString}`,\n    { method: 'GET', headers: headers(token) })\n    .then(response => response.json()).then(responseData => {\n      const totalObtained = ((currentPage - 1) * responseData.per_page) + responseData.data.length;\n      if (totalObtained < responseData.total_count) {\n        return getAllEntries(currentPage + 1, token, params).then(otherEntries => {\n          return responseData.data.concat(otherEntries);\n        });\n      }\n      return responseData.data;\n    });\n}\n\nconst headers = token => ({ Authorization: `Basic ${btoa(`${token}:api_token`)}` });\n\nfunction convertToParams({ workspaceId, projectId, period }) {\n  const { since, until } = convertPeriod(period);\n  return {\n    since,\n    until,\n    workspace_id: workspaceId,\n    project_ids: projectId,\n    user_agent: 'kkd-hrs'\n  };\n}\n\nfunction getDateInMonth(period) {\n  return subMonths(new Date(), parseInt(period, 10));\n}\n\nfunction convertPeriod(period) {\n  const dateInMonth = getDateInMonth(period);\n  const formatPattern = 'yyyy-MM-dd';\n  return {\n    since: format(startOfMonth(dateInMonth), formatPattern),\n    until: format(endOfMonth(dateInMonth), formatPattern)\n  }\n}\n","import React, { Component } from 'react';\nimport { isSameMonth, isSameDay, parseISO } from 'date-fns';\nimport './Graph.css';\n\nexport default class Graph extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltipOpen: false,\n      tooltipX: 0,\n      tooltipY: 0,\n      tooltipExecuted: '',\n      tooltipSubtotal: '',\n      tooltipIdeal: ''\n    };\n  }\n  render() {\n    const {\n      goalInSeconds,\n      totalExecutedSeconds,\n      dateInMonth,\n      dailyGoalSeconds,\n      dailyData,\n      graphData\n    } = this.props.graphData;\n\n    const goalHours = goalInSeconds / 3600;\n    const currentDayIndex = graphData.findIndex(data => isSameDay(new Date(), parseISO(data.date)));\n    const unit = 60 / graphData.length;\n    const maxGraphSlice = currentDayIndex === -1 ? graphData.length : (currentDayIndex + 1);\n\n    return (\n      <div style={{ flex: '1', display: 'flex', flexDirection: 'column' }}>\n        <div>\n          <strong>Goal: </strong> {hms(goalInSeconds)}<br />\n          <strong>Executed: </strong> {hms(totalExecutedSeconds)}<br />\n          <strong>Daily goal: </strong> {hms(dailyGoalSeconds)}<br />\n          {currentDayIndex !== -1 && (\n            <span><strong>Distance from daily goal: </strong> {hms(graphData[currentDayIndex].executedSlope - graphData[currentDayIndex].idealSlope)}</span>\n          )}\n        </div>\n        <div style={{ flex: '1', display: 'none' }}>\n          {graphData.map(({ date, goal, executed, idealSlope, executedSlope }, index) => {\n            const idealPercent = idealSlope / goalInSeconds;\n            const executedPercent = executedSlope / goalInSeconds;\n            return (\n              <div key={index}\n                style={{ padding: '3px', height: '100%', display: 'flex', flex: '1', flexDirection: 'column' }}>\n                <div style={{ flex: '1', display: 'flex', alignItems: 'flex-end' }}>\n                  <div style={{ background: '#f00', flex: '1', height: `${idealPercent * 100}%` }}\n                    title={`Ideal: ${hms(idealSlope)} remaining`} />\n                  <div style={{ background: '#0f0', flex: '1', height: `${executedPercent * 100}%` }}\n                    title={`Executed: ${hms(executedSlope)} remaining`} />\n                </div>\n                <div style={{ height: '30px', fontWeight: index === currentDayIndex ? 'bold' : 'normal' }}>\n                  {index + 1}.\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        <div style={{ flex: '1' }}>\n          <svg style={{ height: '100%', width: '100%' }} version=\"1\" viewBox=\"0 0 60 30\" id=\"graph\">\n            {Array.from({ length: goalHours + 1 }, (_, i) => i).map(hour => (\n              <path\n                strokeWidth={0.1}\n                fill=\"none\"\n                stroke=\"#cccccc\"\n                d={`M 0 ${29 - 28 * (hour / goalHours)} H 60`}\n                key={hour}\n              />\n            ))}\n            {Array.from({ length: goalHours + 1 }, (_, i) => i).map(hour => (\n              <text\n                color=\"#cccccc\"\n                x={0}\n                y={29.6 - 28 * (hour / goalHours)}\n                key={hour}\n                fontSize={0.5}\n              >\n                {hour}\n              </text>\n            ))}\n            <path\n              className=\"ideal\"\n              d={graphData.map(({ idealSlope }, i) => (\n                `${i === 0 ? 'M' : 'L'} ${unit * i + unit / 2} ${29 - (idealSlope / goalInSeconds) * 28}`\n              )).join(' ')}\n            />\n            {graphData.map(({ idealSlope }, i) => (\n              <circle\n                onMouseOver={event => this.showTooltip(event, i)}\n                onMouseLeave={() => this.hideTooltip()}\n                cx={unit * i + unit / 2}\n                cy={29 - (idealSlope / goalInSeconds) * 28}\n                r={0.2}\n                className=\"ideal\"\n                key={i}\n              />\n            ))}\n            <path className=\"executed\" d={graphData.slice(0, maxGraphSlice).map(({ executedSlope }, i) => (\n              `${i === 0 ? 'M' : 'L'} ${unit * i + unit / 2} ${29 - (executedSlope / goalInSeconds) * 28}`\n            )).join(' ')} />\n            {graphData.slice(0, maxGraphSlice).map(({ executedSlope }, i) => (\n              <circle\n                onMouseOver={event => this.showTooltip(event, i)}\n                onMouseLeave={() => this.hideTooltip()}\n                cx={unit * i + unit / 2}\n                cy={29 - (executedSlope / goalInSeconds) * 28}\n                r={0.2}\n                className=\"executed\"\n                key={i}\n              />\n            ))}\n            {Array.from({ length: graphData.length }, (_, i) => i).map(day => (\n              <text textAnchor=\"end\" x={unit * day + unit / 2} y={30} key={day} fontSize={0.8}>{day + 1}.</text>\n            ))}\n          </svg>\n          <div id=\"tooltip\" style={{\n            visibility: this.state.tooltipOpen ? 'visible' : 'hidden',\n            left: this.state.tooltipX,\n            top: this.state.tooltipY\n          }}>\n            <p>Executed: {this.state.tooltipExecuted}</p>\n            <p>Subtotal: {this.state.tooltipSubtotal}</p>\n            <p>Ideal: {this.state.tooltipIdeal}</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  showTooltip(event, index) {\n    const tooltipDimensions = document.querySelector('#tooltip').getBoundingClientRect();\n    const bodyDimensions = document.body.getBoundingClientRect();\n    const { left, height, right, top } = event.currentTarget.getBoundingClientRect();\n    let tooltipX = right + 20;\n    if (tooltipX + tooltipDimensions.width > bodyDimensions.right) {\n      tooltipX = left - 20 - tooltipDimensions.width;\n    }\n    let tooltipY = top + height / 2 - tooltipDimensions.height / 2;\n    if (tooltipY + tooltipDimensions.height > bodyDimensions.bottom) {\n      tooltipY = bodyDimensions.bottom - tooltipDimensions.height - 5;\n    }\n    const data = this.props.graphData.graphData[index];\n    const totalHours = this.props.graphData.goalInSeconds;\n    this.setState({\n      tooltipX,\n      tooltipY,\n      tooltipOpen: true,\n      tooltipExecuted: hms(data.executed),\n      tooltipSubtotal: hms(totalHours - data.executedSlope),\n      tooltipIdeal: hms(totalHours - data.idealSlope)\n    });\n  }\n\n  hideTooltip() {\n    this.setState({ tooltipOpen: false });\n  }\n}\n\nfunction hms(seconds) {\n  seconds = Math.floor(seconds);\n  return [Math.floor(seconds / 3600), Math.floor(seconds / 60) % 60, seconds % 60].map(i => rjust(`${i}`, 2, '0')).join(':')\n}\n\nfunction rjust(string, width, padding) {\n  padding = padding || ' ';\n  padding = padding.substr(0, 1);\n  if (string.length < width)\n    return padding.repeat(width - string.length) + string;\n  else\n    return string;\n}\n","import React, { Component } from 'react';\nimport './App.css';\nimport Forms from './Forms';\nimport { reportToBurndown } from './api/toggl_report';\nimport Graph from './Graph';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      graphLoading: false,\n      graphData: null\n    };\n  }\n\n  loadGraph(data) {\n    this.setState({ graphLoading: true });\n    reportToBurndown(data).then(graphData => {\n      console.log(graphData);\n      this.setState({ graphLoading: false, graphData });\n    });\n  }\n\n  render() {\n    const { graphLoading, graphData } = this.state;\n    return (\n      <div className=\"App\">\n        <Forms onUpdate={data => this.loadGraph(data)} />\n        {!graphLoading && graphData && <Graph graphData={graphData} />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}